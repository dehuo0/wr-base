From 875d12e4f2e0ea885921f120b77a4a566f1a94d9 Mon Sep 17 00:00:00 2001
From: Song.Li <Song.Li@windriver.com>
Date: Mon, 3 Dec 2012 16:46:08 +0800
Subject: [PATCH] remove some checks for cross-compiling

some lib check is not suitable for
cross-compiling, so remove them.

Upstream-Status: Inappropriate [not a real bug,just for cross-compiling]

Signed-off-by: Song.Li <Song.Li@windriver.com>
---
 configure.ac |   59 +++++++--------------------------------------------------
 1 files changed, 8 insertions(+), 51 deletions(-)

diff --git a/configure.ac b/configure.ac
index 37f6c77..59db03b 100644
--- a/configure.ac
+++ b/configure.ac
@@ -15,23 +15,7 @@ AM_MAINTAINER_MODE
 # Whether unixODBC driver manager is used
 #
 AC_ARG_WITH(unixodbc, [  --with-unixodbc=DIR     odbc_config installation of unixODBC (default)],
-[
-	if test "$withval" != no; then
-		if test "$withval" = yes; then
-			AC_PATH_PROGS(ODBC_CONFIG, odbc_config)
-		else
-			ODBC_CONFIG=$withval
-		fi
-		if test ! -f "${ODBC_CONFIG}/bin/odbc_config"; then
-			if test ! -f "${ODBC_CONFIG}"; then
-				AC_MSG_ERROR([odbc_config not found (required for unixODBC build)])
-			fi
-		else
-			ODBC_CONFIG=${ODBC_CONFIG}/bin/odbc_config
-		fi
-		with_unixodbc=yes
-	fi
-	],
+[with_unixodbc=yes],
 [with_unixodbc=yes])
 
 
@@ -73,20 +57,9 @@ fi
 # ODBC include and library
 #
 
-if test "$ODBC_CONFIG" != ""; then
-	if test "$with_iodbc" = yes; then
-		ODBC_INCLUDE=`${ODBC_CONFIG} --cflags`
-		CPPFLAGS="$CPPFLAGS ${ODBC_INCLUDE}"
-		ODBC_LIBS=`${ODBC_CONFIG} --libs`
-		LIBS="$LIBS ${ODBC_LIBS}"
-	else
-		ODBC_INCLUDE=`${ODBC_CONFIG} --include-prefix`
-		CPPFLAGS="$CPPFLAGS -I${ODBC_INCLUDE}"
-		ODBC_LIBS=`${ODBC_CONFIG} --libs`
-		LIBS="$LIBS ${ODBC_LIBS}"
-	fi
-	AC_MSG_NOTICE([using $ODBC_INCLUDE $ODBC_LIBS])
-fi
+ODBC_LIBS="-lodbcinst"
+LIBS="$LIBS ${ODBC_LIBS}"
+AC_MSG_NOTICE([using $ODBC_INCLUDE $ODBC_LIBS])
 
 #
 # SQLCOLATTRIBUTE_SQLLEN check
@@ -206,16 +179,10 @@ PGAC_ARG_BOOL(enable, pthreads, yes,
 #
 
 if test "$with_libpq" = yes; then
-  if test -z "$PG_CONFIG"; then
-  	AC_PATH_PROGS(PG_CONFIG, pg_config)
-  fi
-
-  if test -n "$PG_CONFIG"; then
-    pg_includedir=`"$PG_CONFIG" --includedir`
-    pg_libdir=`"$PG_CONFIG" --libdir`
-    CPPFLAGS="$CPPFLAGS -I$pg_includedir"
-    LDFLAGS="$LDFLAGS -L$pg_libdir"
-  fi
+  pg_includedir=""
+  pg_libdir=""
+  CPPFLAGS="$CPPFLAGS"
+  LDFLAGS="$LDFLAGS"
 fi
 
 
@@ -243,21 +210,11 @@ if test "$with_iodbc" = yes; then
                  [AC_MSG_ERROR([iODBC library "iodbcinst" not found])])
 fi
 
-if test "$enable_pthreads" = yes; then
-  AC_CHECK_LIB(pthreads, pthread_create,
-               [],
-	       [AC_CHECK_LIB(pthread, pthread_create)])
-fi
-
 if test "$with_libpq" = yes; then
   AC_CHECK_LIB(pq, PQconnectdb, [],
 	      [AC_MSG_ERROR([libpq library not found])])
 fi
 
-if test "$enable_openssl" = yes; then
-  AC_CHECK_LIB(ssl, SSL_read, [], [AC_MSG_ERROR([ssl library not found])])
-fi
-
 if test "$enable_gss" = yes; then
   AC_SEARCH_LIBS(gss_init_sec_context, [gssapi_krb5 gss 'gssapi -lkrb5 -lcrypto'], [],  [AC_MSG_ERROR([gssapi library not found])])
 fi
-- 
1.7.1

